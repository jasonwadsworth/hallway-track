type User {
  id: ID!
  email: AWSEmail!
  displayName: String!
  gravatarHash: String!
  contactLinks: [ContactLink!]!
  badges: [Badge!]!
  connectionCount: Int!
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

type ContactLink {
  id: ID!
  label: String!
  url: String!
  visible: Boolean!
}

type Connection {
  id: ID!
  userId: ID!
  connectedUserId: ID!
  connectedUser: User
  tags: [String!]!
  note: String
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

type Badge {
  id: ID!
  name: String!
  description: String!
  threshold: Int!
  iconUrl: String
  earnedAt: AWSDateTime
  category: String
  metadata: BadgeMetadata
}

type BadgeMetadata {
  relatedUserId: ID
  relatedUserName: String
  eventYear: Int
  count: Int
  triangleUsers: [ID!]
}

type LinkType {
  id: ID!
  label: String!
  imageUrl: String!
  placeholder: String!
  urlPattern: String
  sortOrder: Int!
}

type PublicProfile {
  id: ID!
  displayName: String!
  gravatarHash: String!
  contactLinks: [ContactLink!]!
  badges: [Badge!]!
}

type Query {
  getUser(id: ID!): User
  getMyProfile: User
  getPublicProfile(userId: ID!): PublicProfile
  getMyConnections: [Connection!]!
  checkConnection(userId: ID!): Boolean!
  getLinkTypes: [LinkType!]!
}

type Mutation {
  createUser(email: AWSEmail!, displayName: String!): User!
  updateDisplayName(displayName: String!): User!
  addContactLink(label: String!, url: String!, visible: Boolean): User!
  updateContactLink(contactLinkId: ID!, label: String, url: String, visible: Boolean): User!
  removeContactLink(contactLinkId: ID!): User!
  createConnection(connectedUserId: ID!): Connection!
  addTagToConnection(connectionId: ID!, tag: String!): Connection!
  removeTagFromConnection(connectionId: ID!, tag: String!): Connection!
  updateConnectionNote(connectionId: ID!, note: String): Connection!
}

schema {
  query: Query
  mutation: Mutation
}
